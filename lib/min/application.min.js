var CategoryMenu;(function(e,t){CategoryMenu=function(t){this.el=t;this.$el=e(t);this.init()};t.extend(CategoryMenu.prototype,{init:function(){t.bindAll(this,"handleCategoryClick");var e=this;e.ui={nav:e.$el.find("nav")};e.ui.nav.find("button").hammer().on({tap:e.handleCategoryClick})},clearActive:function(){this.$el.find(".active").removeClass("active")},setActive:function(t){this.clearActive();e(t).closest("li").addClass("active")},getActive:function(){return this.ui.nav.find(".active button").text().toLowerCase().replace(/ /g,"-")},handleCategoryClick:function(e){this.setActive(e.currentTarget);this.$el.trigger("change:active",this.getActive())}})})(jQuery,window._);var App;(function(e,t){App=function(t){this.el=t;this.$el=e(t)};t.extend(App.prototype,{init:function(){t.bindAll(this,"handleToggleClick","handleSwipeLeft","handleSwipeRight","handleChangeActive");var e=this;e.ui={toggle:e.$el.find(".toggle"),menu:e.$el.find(".unit-category"),stage:e.$el.find(".stage")};e.menu=this.getMenu();e.ui.toggle.hammer().on({tap:e.handleToggleClick});e.$el.hammer().on({dragleft:e.handleSwipeLeft,dragright:e.handleSwipeRight});e.menu.$el.bind({"change:active":e.handleChangeActive})},getMenu:function(){return new CategoryMenu(this.ui.menu[0])},toggleOpen:function(e){t.isUndefined(e)&&(e=!this.isOpen());this.$el.toggleClass("menu-open",e)},isOpen:function(){return this.$el.hasClass("menu-open")},handleToggleClick:function(){this.toggleOpen()},handleSwipeLeft:function(){this.toggleOpen(!1)},handleSwipeRight:function(){this.toggleOpen(!0)},handleChangeActive:function(e,t){this.toggleOpen(!1);console.log("New active: "+t)}})})(jQuery,window._);var app;(function(e){var t=navigator.userAgent,n=t.match(/(iPad|iPhone|iPod)/g)?!0:!1,r=t.match(/Safari/i)&&!t.match(/Chrome/i)&&!t.match(/CriOS/i)?!0:!1;e(document).ready(function(){!window.navigator.standalone&&n?r||e("#install .message").html("You must be using Safari to install <strong>thistothat</strong>"):e("#install").remove();e("#install").remove();app=new App(e("body")[0]);app.init()})})(jQuery);