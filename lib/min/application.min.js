var CategoryMenu;(function(e,t){CategoryMenu=function(t){this.el=t;this.$el=e(t);this.init()};t.extend(CategoryMenu.prototype,{init:function(){t.bindAll(this,"handleMenuClick","handleCategoryClick");var e=this;e.ui={toggle:e.$el.find(".toggle"),nav:e.$el.find("nav")};e.ui.toggle.bind({click:e.handleMenuClick,touchstart:e.handleMenuClick});e.ui.nav.find("a").bind({click:e.handleCategoryClick,touchstart:e.handleCategoryClick})},toggleOpen:function(e){t.isUndefined(e)&&(e=!this.isOpen());this.$el.toggleClass("open",e)},isOpen:function(){return this.$el.hasClass("open")},clearActive:function(){this.$el.find(".active").removeClass("active")},setActive:function(t){this.clearActive();e(t).closest("li").addClass("active")},getActive:function(){return this.ui.nav.find(".active a").text().toLowerCase().replace(/ /g,"-")},handleMenuClick:function(e){e&&e.preventDefault();this.toggleOpen()},handleCategoryClick:function(e){e&&e.preventDefault();this.setActive(e.currentTarget);this.toggleOpen(!1);this.$el.trigger("change:active",this.getActive())}})})(jQuery,window._);var menu;(function(e){var t=navigator.userAgent,n=t.match(/(iPad|iPhone|iPod)/g)?!0:!1,r=t.match(/Safari/i)&&!t.match(/Chrome/i)&&!t.match(/CriOS/i)?!0:!1;e(document).ready(function(){!window.navigator.standalone&&n?r||e("#install .message").html("You must be using Safari to install <strong>thistothat</strong>"):e("#install").remove();menu=new CategoryMenu(e(".unit-category")[0]);menu.$el.bind({"change:active":function(e,t){console.log(t)}})})})(jQuery);